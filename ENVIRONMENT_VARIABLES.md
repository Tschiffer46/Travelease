# Environment Variables Configuration Guide

## üîß Current Issues with Your Environment Variables

Based on the variables you provided, several have placeholder values that need to be updated:

### ‚ùå Variables with Placeholders (MUST FIX)

1. **NEXTAUTH_URL**
   ```
   Current: "https://your-app.up.railway.app"
   Correct: "https://travelease-production-a2c6.up.railway.app"
   ```
   **Why it matters:** Required for authentication features to work

2. **NEXTAUTH_SECRET**
   ```
   Current: "generate-with-openssl-rand-base64-32"
   ```
   **How to fix:** Generate a real secret:
   ```bash
   openssl rand -base64 32
   ```
   Example output: `wJd8+7ZGh3kM9pL6nQ4sR2tU3vW5xY7zA0bC1dE2fG3=`
   
   Use this generated string as your NEXTAUTH_SECRET

3. **OPENWEATHER_API_KEY**
   ```
   Current: "your-openweathermap-api-key"
   ```
   **How to fix:** Get a free API key:
   1. Go to https://openweathermap.org/api
   2. Sign up for free account
   3. Generate API key (free tier: 1000 calls/day)
   4. Copy the key to this variable
   
   **Note:** Site will work without this, but destination recommendations won't function

### ‚úÖ Variables Already Correctly Set

These PostgreSQL variables are automatically set by Railway and look correct:

- DATABASE_URL ‚úÖ
- DATABASE_PUBLIC_URL ‚úÖ
- PGDATABASE ‚úÖ
- PGHOST ‚úÖ
- PGPASSWORD ‚úÖ
- PGPORT ‚úÖ
- PGUSER ‚úÖ
- POSTGRES_DB ‚úÖ
- POSTGRES_PASSWORD ‚úÖ
- POSTGRES_USER ‚úÖ

### ‚ö†Ô∏è Optional Variables (For Future Use)

These Stripe variables are set but not required for basic site functionality:

- STRIPE_SECRET_KEY
- STRIPE_PUBLISHABLE_KEY
- STRIPE_WEBHOOK_SECRET

**Note:** Only needed when you implement payment processing. Site works fine without them for now.

## üìã Complete Environment Variables Reference

Here's what your Railway environment variables should look like:

```bash
# Database (Auto-generated by Railway PostgreSQL)
DATABASE_URL="postgresql://postgres:bfmQOBvOtjOuBxnrWatJretlBYITsswt@..."
DATABASE_PUBLIC_URL="postgresql://..."
PGDATA="/var/lib/postgresql/data/pgdata"
PGDATABASE="railway"
PGHOST="..."
PGPASSWORD="bfmQOBvOtjOuBxnrWatJretlBYITsswt"
PGPORT="5432"
PGUSER="postgres"
POSTGRES_DB="railway"
POSTGRES_PASSWORD="bfmQOBvOtjOuBxnrWatJretlBYITsswt"
POSTGRES_USER="postgres"

# Application Settings
NODE_ENV="production"
RAILWAY_DEPLOYMENT_DRAINING_SECONDS="60"
SSL_CERT_DAYS="820"

# Authentication (MUST UPDATE)
NEXTAUTH_URL="https://travelease-production-a2c6.up.railway.app"
NEXTAUTH_SECRET="<YOUR_GENERATED_SECRET_HERE>"

# APIs (SHOULD UPDATE)
OPENWEATHER_API_KEY="<YOUR_API_KEY_HERE>"

# Stripe (Optional - for payment processing)
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
```

## üöÄ How to Update Variables in Railway

### Method 1: Railway Dashboard (Easiest)

1. Go to https://railway.app
2. Open your `travelease` project
3. Click on your **application service** (not PostgreSQL)
4. Go to **"Variables"** tab
5. Find each variable that needs updating
6. Click on the variable
7. Update the value
8. Click "Update" or press Enter
9. Railway will automatically redeploy

### Method 2: Railway CLI

```bash
# Install Railway CLI
npm install -g @railway/cli

# Login
railway login

# Link to project
railway link

# Set individual variables
railway variables set NEXTAUTH_URL="https://travelease-production-a2c6.up.railway.app"
railway variables set NEXTAUTH_SECRET="<your-generated-secret>"
railway variables set OPENWEATHER_API_KEY="<your-api-key>"
```

### Method 3: Bulk Update via CLI

```bash
# Create a file with your variables
cat > .env.railway << EOF
NEXTAUTH_URL=https://travelease-production-a2c6.up.railway.app
NEXTAUTH_SECRET=<your-generated-secret>
OPENWEATHER_API_KEY=<your-api-key>
EOF

# Upload all at once
railway variables --set-from .env.railway
```

## ‚è±Ô∏è When Do Changes Take Effect?

1. **Immediate**: Variable changes are saved immediately
2. **Deployment**: Railway auto-triggers a new deployment
3. **Live**: Changes are live after deployment completes (2-3 minutes)

## üîç Verify Variables Are Set Correctly

After updating, verify:

```bash
# View all variables
railway variables

# Or in Railway Dashboard
# Go to Variables tab and check values
```

## üìù Step-by-Step Fix Guide

### 1. Generate NEXTAUTH_SECRET

```bash
openssl rand -base64 32
```

Copy the output (e.g., `wJd8+7ZGh3kM9pL6nQ4sR2tU3vW5xY7zA0bC1dE2fG3=`)

### 2. Get OpenWeather API Key (Optional but Recommended)

1. Visit: https://openweathermap.org/api
2. Click "Sign Up" (free)
3. Verify email
4. Go to "API keys" tab
5. Copy your API key

### 3. Update Variables in Railway

**Update NEXTAUTH_URL:**
```
Old: https://your-app.up.railway.app
New: https://travelease-production-a2c6.up.railway.app
```

**Update NEXTAUTH_SECRET:**
```
Old: generate-with-openssl-rand-base64-32
New: <paste your generated secret>
```

**Update OPENWEATHER_API_KEY:**
```
Old: your-openweathermap-api-key
New: <paste your API key>
```

### 4. Wait for Redeployment

Railway will automatically:
1. Detect variable changes
2. Trigger new build
3. Deploy with updated configuration
4. Take 2-3 minutes

### 5. Verify Site Works

Visit: https://travelease-production-a2c6.up.railway.app

Test:
- [ ] Homepage loads
- [ ] Products page loads
- [ ] Can add items to cart
- [ ] Destination search works (if OpenWeather key set)

## ‚ö†Ô∏è Security Notes

**DO NOT:**
- ‚ùå Commit secrets to Git
- ‚ùå Share secrets publicly
- ‚ùå Use same secrets in development and production

**DO:**
- ‚úÖ Use Railway's secure variable storage
- ‚úÖ Generate strong random secrets
- ‚úÖ Rotate secrets periodically
- ‚úÖ Use different secrets for different environments

## üéØ Priority Order

Fix in this order for fastest results:

1. **HIGH PRIORITY** (Site won't work properly without):
   - NEXTAUTH_URL ‚Üí Update to actual Railway URL
   - NEXTAUTH_SECRET ‚Üí Generate and set real secret

2. **MEDIUM PRIORITY** (Improves functionality):
   - OPENWEATHER_API_KEY ‚Üí Enables destination recommendations

3. **LOW PRIORITY** (For future features):
   - Stripe variables ‚Üí Only needed when adding payments

## ‚úÖ Success Checklist

After fixing environment variables:

- [ ] NEXTAUTH_URL points to actual Railway URL
- [ ] NEXTAUTH_SECRET is a real generated value (32+ characters)
- [ ] OPENWEATHER_API_KEY is set (optional but recommended)
- [ ] Railway redeployed successfully
- [ ] Site loads without errors
- [ ] No placeholder values remain

## üéâ Result

Once fixed, your site will:
- ‚úÖ Function properly with correct URLs
- ‚úÖ Have secure authentication foundation
- ‚úÖ Support weather-based recommendations
- ‚úÖ Be ready for production use

**Fix these variables first, then re-seed the database for complete solution!**
