# TravelEase - Deployment Checklist (Railway)

## Pre-Deployment Verification âœ…

### Build Status
- âœ… `npm run build` completes successfully
- âœ… No TypeScript errors
- âœ… All routes properly configured
- âœ… Static and dynamic rendering optimized

### Code Quality
- âœ… All features implemented and tested
- âœ… Database schema finalized
- âœ… API endpoints functional
- âœ… Error handling in place

### Documentation
- âœ… README.md complete
- âœ… SETUP.md with detailed instructions
- âœ… PROJECT_SUMMARY.md available
- âœ… Environment variables documented
- âœ… RAILWAY_DEPLOYMENT.md for Railway-specific guide

## Railway Deployment Steps

### 1. Database Setup (5 minutes)

**Railway PostgreSQL (Recommended)**
```bash
# In Railway Dashboard
1. Click "+ New" in project
2. Select "Database" â†’ "Add PostgreSQL"
3. DATABASE_URL is automatically created and linked
4. No manual configuration needed!
```

**Alternative: External Database**
If you prefer an external provider:

- **Supabase**: Create project at supabase.com â†’ Get connection string
- **Neon**: Create project at neon.tech â†’ Copy connection string
- **Render**: Create PostgreSQL at render.com â†’ Get DATABASE_URL

### 2. Environment Variables (3 minutes)

Add these to Railway dashboard (Variables tab):

```env
# Required
DATABASE_URL="postgresql://..."  # Auto-generated by Railway PostgreSQL

# Optional (for full functionality)
NEXTAUTH_URL="https://your-app.up.railway.app"  # Update after deployment
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"
OPENWEATHER_API_KEY="get-from-openweathermap.org"

# For payments (Phase 2)
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Environment
NODE_ENV="production"
```

### 3. Railway Deployment (2 minutes)

**Method 1: Via Railway Dashboard (Easiest)**
```bash
1. Go to railway.app/new
2. Click "Deploy from GitHub repo"
3. Select Tschiffer46/Travelease repository
4. Railway auto-detects Next.js and configures
5. Click "Deploy"
6. Wait 2-3 minutes for build
```

**Method 2: Via Railway CLI**
```bash
# Install CLI
npm install -g @railway/cli

# Login
railway login

# Link to project (or create new)
railway link

# Deploy
railway up
```

### 4. Database Initialization (2 minutes)

After deployment, initialize the database:

```bash
# Install Railway CLI if not already installed
npm i -g @railway/cli

# Login and link to your project
railway login
railway link

# Push database schema
railway run npm run db:push

# Seed with sample data
railway run npm run db:seed
```

### 5. Verification (5 minutes)

Test these URLs on your Railway deployment:

- âœ… Homepage: `https://your-app.up.railway.app`
- âœ… Products: `https://your-app.up.railway.app/products`
- âœ… Cart: `https://your-app.up.railway.app/cart`
- âœ… Admin: `https://your-app.up.railway.app/admin`

Test features:
- âœ… Browse products
- âœ… Add to cart
- âœ… View TSA calculator
- âœ… Search destination
- âœ… Access admin dashboard

## Post-Deployment

### Immediate Tasks

1. **Update NEXTAUTH_URL** (Required)
   - Copy your Railway URL
   - Update NEXTAUTH_URL variable in Railway dashboard
   - Railway will auto-redeploy

2. **Configure Custom Domain** (Optional)
   - In Railway: Settings â†’ Networking
   - Add custom domain or generate Railway subdomain
   - Update NEXTAUTH_URL if domain changes

3. **Set Up Monitoring** (Recommended)
   - Railway provides built-in metrics
   - View logs: `railway logs -f`
   - Monitor CPU/Memory in dashboard

### Week 1 Tasks

1. **Add Product Images**
   - Upload to CDN or use URLs
   - Update products via admin panel

2. **Test All Flows**
   - Customer journey
   - Admin functions
   - Error scenarios

3. **Monitor Performance**
   - Check Railway metrics
   - Test load times
   - Monitor logs for errors

### Month 1 Goals

1. **Payment Integration**
   - Set up Stripe
   - Test checkout flow
   - Add webhook handlers

2. **Authentication**
   - Configure NextAuth.js
   - Add login/signup
   - Protect admin routes

3. **Content**
   - Add more products
   - Update descriptions
   - Add better images

## Troubleshooting

### Build Fails on Railway

**Error: "Prisma Client not generated"**
```bash
# Verify postinstall script in package.json
"scripts": {
  "postinstall": "prisma generate"
}
# Railway runs this automatically
```

**Error: "DATABASE_URL not found"**
- Check PostgreSQL service is added to project
- Verify DATABASE_URL variable exists in Variables tab
- Ensure database service is linked to app service

### Runtime Errors

**Error: "Can't connect to database"**
- Verify DATABASE_URL is correct
- Check PostgreSQL service is running
- Both services should be in same Railway project (private network)

**Error: "OpenWeatherMap API error"**
- Verify API key is correct
- Check API rate limits
- App will work without it (fallback mode)

### Performance Issues

**Slow page loads**
- Railway cold starts can take 30s on free tier
- Consider "Always On" feature for faster response
- Optimize database queries

**High database usage**
- Add connection pooling if needed
- Monitor query performance
- Consider upgrading Railway plan

## Security Checklist

### Before Going Live

- [ ] Change all default secrets
- [ ] Review environment variables
- [ ] Enable HTTPS only
- [ ] Set up CORS properly
- [ ] Review API rate limits
- [ ] Add input validation
- [ ] Sanitize user inputs
- [ ] Review SQL queries

### For Production

- [ ] Set up monitoring
- [ ] Configure error tracking (Sentry)
- [ ] Add logging
- [ ] Set up backups
- [ ] Document admin access
- [ ] Create incident response plan

## Success Metrics

### Week 1
- âœ… Site is live and accessible
- âœ… All pages load correctly
- âœ… No critical errors
- âœ… Admin can manage products

### Month 1
- âœ… Payments working
- âœ… First real orders
- âœ… User accounts functional
- âœ… Performance optimized

### Month 3
- âœ… Multi-language support
- âœ… Marketing campaigns
- âœ… Growing user base
- âœ… Positive feedback

## Support Resources

- [Railway Documentation](https://docs.railway.app)
- [Railway Discord Community](https://discord.gg/railway)
- [Railway Status](https://status.railway.app)
- [Next.js Deployment Docs](https://nextjs.org/docs/deployment)
- [Prisma Deployment Guide](https://www.prisma.io/docs/guides/deployment)
- [Stripe Integration Guide](https://stripe.com/docs)

## Emergency Contacts

- Railway Support: support@railway.app or Discord
- Database Provider: [your provider if external]
- Developer: [your email]

---

**Ready to Deploy? Let's go! ðŸš€**

See [RAILWAY_DEPLOYMENT.md](RAILWAY_DEPLOYMENT.md) for the complete step-by-step guide!
